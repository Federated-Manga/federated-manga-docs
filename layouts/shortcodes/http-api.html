{{/*

    This template is used to render an HTTP API, given an OpenAPI 3 definition.
  
    It expects to be passed two parameters:
  
    * a `spec` parameter identifying the spec, which must be the name of
    a directory under /api
    * an `api` parameter, identifying an OpenAPI 3 definition,
    which is the name of a schema file under "api/$spec".
    The file extension is omitted. For example:
  
        {{% http-api spec="server-server" api="public_rooms" %}}
  
  */}}
  
  
  {{ $spec := .Params.spec}}
  {{ $api := .Params.api}}

  {{ $api_data := index .Site.Data.api $spec $api }}
  {{ $server := index $api_data.servers 0 "url" }}
  {{ $path := delimit (slice "api" $spec) "/" }}
  {{ partial "openapi/render-api" (dict "api_data" $api_data "server" $server "path" $path) }}
  